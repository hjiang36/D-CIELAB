<!DOCTYPE html>
<html lang="en">
<head>
<title>D-CIELAB Web Tools</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Bootstrap -->
<link href="bootstrap/css/prettify_bootstrap.css" rel="stylesheet">
<link href="bootstrap/css/docs.min.css" rel="stylesheet">
<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
<script src="http://code.jquery.com/jquery.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrapValidator.js"></script>
<script type="text/javascript" src="javascripts/colorspaces.js"></script>
</head>
<body>
<div class="container bs-docs-container">
  <div class=" bs-docs-section">
    <h1 id="coneAbsorption" class="page-header"> D-CIELAB Web Tools </h1>
    <div class=" alert alert-warning alert-dismissable">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      <strong>Warning!</strong> This site is still under development </div>
    <div class=" bs-callout bs-callout-danger">
      <h4> Test Information </h4>
      <p>  This is the test information </p>
    </div>
    <form class="form-horizontal" role="form" id="color-transform-form">
      <fieldset>
        <!-- Brettel Color Transform -->
        <div class="panel panel-default">
          <div class="panel-heading">
          <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#colorTransform"> Equivalent Color Calculator </a></h4>
          </div>
          <div class="panel-collapse collapse in" id="colorTransform">
            <div class="panel-body">
              <!-- Color Space Selection -->
              <div class="form-group">
                <label class="col-sm-2 control-label" for="colorSpace">Color Space</label>
                <div class="col-sm-2">
                  <select id="colorSpace" class="form-control">
                  	<option>sRGB</option>
                  	<option>XYZ </option>
			<option>xyY </option>
                  	<option>LMS </option>
                  </select>
                </div>
              </div>
              
              <!-- Original Color -->
              <div class="form-group">
                <label class="control-label col-sm-2" for="Original-Color-1">Original Color</label>
                <div class="col-sm-2">
                  <input type="number" min="0" max="2048" step="any" class="input-small form-control" id="Original-Color-1" placeholder="R">
                </div>
                <div class="col-sm-2">
                  <input type="number" min="0" max="2048" step="any" class="input-small form-control" id="Original-Color-2" placeholder="G">
                </div>
                <div class="col-sm-2">
                  <input type="number" min="0" max="2048" step="any" class="input-small form-control" id="Original-Color-3" placeholder="B">
                </div>
              </div>
              
              <!-- Colorblind Type Selection -->
              <div class="form-group">
                <label class="col-sm-2 control-label" for="cbType">Colorblind Type</label>
                <div class="col-sm-2">
                  <select id="cbType" class="form-control">
                  	<option>Trichromat</option>
                    	<option selected="selected">Protanopia</option>
                    	<option>Deutanopia </option>
                    	<option>Tritanopia </option>
                  </select>
                </div>
              </div>
                            
              <!-- Transformed Color -->
              <div class="form-group">
                <label class="control-label col-sm-2" for="Transformed-Color-1">Transformed Color</label>
                <div class="col-sm-2">
                  <input type="number" min="0" max="2048" step="any" class="input-small form-control" id="Transformed-Color-1" placeholder="N/A" disabled>
                </div>
                <div class="col-sm-2">
                  <input type="number" min="0" max="2048" step="any" class="input-small form-control" id="Transformed-Color-2" placeholder="N/A" disabled>
                </div>
                <div class="col-sm-2">
                  <input type="number" min="0" max="2048" step="any" class="input-small form-control" id="Transformed-Color-3" placeholder="N/A" disabled>
                </div>
              </div>

            </div>
          </div>
        </div>
        
        <div class="panel"></div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Submit</button>
          <button class="btn">Cancel</button>
        </div>
      </fieldset>
    </form>
  </div>
</div>


<script type="text/javascript">
function clearColorInputs(){
	$("#Original-Color-1").val("");
	$("#Original-Color-2").val("");
	$("#Original-Color-3").val("");
	$("#Transformed-Color-1").val("");
	$("#Transformed-Color-2").val("");
	$("#Transformed-Color-3").val("");

}

function getInputXYZ(){
	var colorSpace = $("#colorSpace").val();
	var c1 = $("#Original-Color-1").val();
	var c2 = $("#Original-Color-2").val();
	var c3 = $("#Original-Color-3").val();
	if ($.isNumeric(c1) && $.isNumeric(c2) && $.isNumeric(c3)){
	  var c = $.colorspaces.make_color("sRGB", [c1, c2, c3]);
	  return c.as("CIEXYZ");
	}
	else{
	  return [NaN, NaN, NaN];
	}
}

$("#colorSpace").change(function (){
	clearColorInputs();
	var indx = document.getElementById("colorSpace").selectedIndex;
	switch (indx){
	  case 1:
		$("#Original-Color-1").attr("placeholder", "X");
		$("#Original-Color-2").attr("placeholder", "Y");
		$("#Original-Color-3").attr("placeholder", "Z");
		break;
	  case 2:
		$("#Original-Color-1").attr("placeholder", "x");
		$("#Original-Color-2").attr("placeholder", "y");
		$("#Original-Color-3").attr("placeholder", "Y");
		break;
	  case 3:
		$("#Original-Color-1").attr("placeholder", "L");
		$("#Original-Color-2").attr("placeholder", "M");
		$("#Original-Color-3").attr("placeholder", "S");
		break;
	  default:
		$("#Original-Color-1").attr("placeholder", "R");
		$("#Original-Color-2").attr("placeholder", "G");
		$("#Original-Color-3").attr("placeholder", "B");
		break;
	}
});

$("#Original-Color-1, #Original-Color-2, #Original-Color-3").change(function (){
	var XYZ = getInputXYZ();
	if (!isNaN(XYZ[0]) && !isNaN(XYZ[1]) && !isNaN(XYZ[2])){
		$("#Transformed-Color-1").val(XYZ[0]);
		$("#Transformed-Color-2").val(XYZ[1]);
		$("#Transformed-Color-3").val(XYZ[2]);	
	}
	else{
		$("#Transformed-Color-1").val("");
		$("#Transformed-Color-2").val("");
		$("#Transformed-Color-3").val("");	
	}
});
</script>
</body>
</html>
